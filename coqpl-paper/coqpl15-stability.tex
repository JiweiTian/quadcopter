%-----------------------------------------------------------------------------
%
%               Template for sigplanconf LaTeX Class
%
% Name:         sigplanconf-template.tex
%
% Purpose:      A template for sigplanconf.cls, which is a LaTeX 2e class
%               file for SIGPLAN conference proceedings.
%
% Guide:        Refer to "Author's Guide to the ACM SIGPLAN Class,"
%               sigplanconf-guide.pdf
%
% Author:       Paul C. Anagnostopoulos
%               Windfall Software
%               978 371-2316
%               paul@windfall.com
%
% Created:      15 February 2005
%
%-----------------------------------------------------------------------------


\documentclass[10pt]{sigplanconf}

% The following \documentclass options may be useful:

% preprint      Remove this option only once the paper is in final form.
% 10pt          To set in 10-point type instead of 9-point.
% 11pt          To set in 11-point type instead of 9-point.
% authoryear    To obtain author/year citation style instead of numeric.

\usepackage{amsmath}
\usepackage{latexsym}




\begin{document}

\special{papersize=8.5in,11in}
\setlength{\pdfpageheight}{\paperheight}
\setlength{\pdfpagewidth}{\paperwidth}

\conferenceinfo{CONF 'yy}{Month d--d, 20yy, City, ST, Country}
\copyrightyear{20yy}
\copyrightdata{978-1-nnnn-nnnn-n/yy/mm}
\doi{nnnnnnn.nnnnnnn}

% Uncomment one of the following two, if you are not going for the
% traditional copyright transfer agreement.

%\exclusivelicense                % ACM gets exclusive license to publish,
                                  % you retain copyright

%\permissiontopublish             % ACM gets nonexclusive license to publish
                                  % (paid open-access papers,
                                  % short abstracts)

\titlebanner{banner above paper title}        % These are ignored unless
\preprintfooter{short description of paper}   % 'preprint' option specified.

\title{Title Text}
\subtitle{Subtitle Text, if any}

\authorinfo{Name1}
           {Affiliation1}
           {Email1}
\authorinfo{Name2\and Name3}
           {Affiliation2/3}
           {Email2/3}

\maketitle


% \category{CR-number}{subcategory}{third-level}

% % general terms are not compulsory anymore,
% % you may leave them out
% \terms
% term1, term2

% \keywords
% keyword1, keyword2

% intro, overview of project, overview of control theory, sketch of proof,
% future work
\section{Introduction}          % 1 col

As we grow increasingly reliant on software for control of critical infrastructure, so does our need for guarantees that such software is free of errors. Complete formal verification with a proof assistant is the best way to obtain extremely strong guarantees that software systems satisfy a specification; however this technique has only recently been extended to the domain of cyber-physical systems [cite: ROScoq, MEMOCODE]. % is this true? Maybe a bit more here?
% In this paper, we present an overview of and our experiences in formalizing and reasoning about the physical behavior of hybrid systems in Coq.

The Veridrone project aims to build cyber-physical systems that adhere to various safety policies, by proving that various formal specifications are obeyed in Coq. Our work is implemented in the domain of hobbyist unmanned aerial vehicles (drones), described in .... We have constructed shims for bounding velocity and height, and shown how to compose them in [cite]. In this paper, we present our experiences in formalizing and reasoning about stability properties of the quadcopter.

%In order to avoid formalizing the entirety of the existing control software, we simply guard the feedback loop by inserting verified shims between the existing software and the actuators.




\section{Background}

% start with the proof goal then introduce stability, or stability -> different proofs of stability?


An important safety property we would like guarantees about is that of \emph{stability}. Given deceleration $d$, will our quadcopter eventually come to a stop? Or, given initial velocity $v$, will the quadcopter reach a target coordinate $c$? How quickly can it reach the target?

In control theory, stability formalizes these properties about a given system. Formally, it aims to show whether a set of differential equations will converge to a fixed point over time given some initial conditions. The challenge with applying the standard techniques from control theory to the domain of hybrid systems is in reasoning about both discrete and continuous aspects

% Canonically, there are three tiers of stability ---

% TODO: add formal defns. should they be in context of the controllers?
\begin{enumerate}
\item Lyapunov stability, which states that a dynamical system starting in the neighborhood of some point $\alpha > 0$ will always circle around that point (i.e. not ``lose stability'' over time),

\item  Asymptotic stability, which states that a Lyapunov stable system will converge to the stable point over time, and

\item  Exponential stability, which states that an asymptotically stable system will converge exponentially fast.
\end{enumerate}


We have proven Lyapunov and Exponential stability for our height controller, which bounds the deceleration behavior of the quadcopter. The challenge with applying the standard techniques from control theory to the domain of hybrid systems is in reasoning about discrete and continuous time simultaneously.

% something about TLA, the Sys abstraction and differential induction

% 1. Lyapunov stability

% 2. Exponential stability

Exponential stability states that the continuous dynamics of the system will force the quadcopter to land exponentially fast --- that is,

starting at an initial state

In the time interval between runs of the discrete controller, $t_0\leq t \leq t_0+\Delta$, the height of the system will decrease exponentially fast over multiple continuous transitions of the system, with its upper bound given by the function
 \[E(t)=x_0e^{-b(t-t_0)}\]
but this leaves us with the unpleasant work of having to reason over fractionals. In order to simplify our proofs, we instead assert a stronger property --- that the height is bounded by the tangent to $E$ at $t_0$, selected at the start of the continuous transitions:
\[T(t) = E'(t_0)(t-t_0)+x_0 = -bx_0(t-t_0)+x_0\]
which we can then compose into a proof of exponential stability by showing that
\[
  \frac
  {\begin{aligned}
      & \vdash \emph{Init} \land \Box \emph{World} \rightarrow \Box \emph{Safe} \\
      & \vdash \Box (T\leq E)
    \end{aligned}}
  {\vdash \emph{Init} \land \Box \emph{World} \rightarrow \Box \emph{ExpSafe}}
\]

% Exponential stability of height over time: $E(t)=x_0e^{-b(t-t_0)}$
% tangent to Exp: \[T(t) = E'(t_0)(t-t_0)+x_0 = -bx_0(t-t_0)+x_0\]


% Should this be folded into the narrative about the two stability proofs?
% Or should this describe the interesting parts of the proofs while the above
% describes the math? .... what really do I put here?
\section {Experiences}

\emph{Coq as a reasoning tool: } Following several unsuccessful attempts to extend the proof of Lyapunov stability for exponential stability, we discovered that contrary to the hierarchy of mathematical definitions, the context that the two proofs needed are different. Because of the weakness of Lyapunov stability, we were able to correctly formulate it assuming that the


% This uncovered an interesting property about the interactions between the discrete and continuous parts of hybrid systems --- that

%  Intuitively, Lyapunov stability is a property that holds true for \emph{all time}, while asymptotic and exponential stability converge, and can be thought of as a piecewise function that becomes constant after the stable point is reached. did not realize this

% forced us to reexamine our formalism
% ... pointed out gaps in our reasoning.


\emph{Reasoning about real arithmetic, powers and floating point: }
A significant challenge faced during our development of the proofs, especially the

\section{Future work}

Our initial work on stability has focused on a one-dimensional P (Proportional) controller. By extending the model to the full generality of a PID (Proportional-Integral-Derivative) controller, which will allow for the expression of more exciting behaviors such as oscillatory convergence to a goal, rather than limiting behavior to be monotonically increasing or decreasing towards the goal as it is in the current formulation.

Ideally, the construction of a verified PID controller would follow from a layered composition, allowing for the separate construction of the I and D controllers. It might prove helpful to reformulate our mathematics using the standard method of Lyapunov functions from control theory, which in principle would allow for the different types of stability to be expressed in a uniform way. In the context of hybrid systems, however, Lyapunov's method might need to be extended to incorporate the discrete component.


% Logical extensions to this work would be to show the convergence of the system in the remaining two dimensions, so as to guarantee that we can accurately reach any point in three dimensional space. To this end, . Further refinements on the


% Have to figure out how our formalism maps to PID controller theory
% ... PID (Proportional-Integral-Derivative) controllers.
% - Proportional gain
% - Integral - accelerates movement towards stable point. accounts for both positive and neg errors
% - Derivative -

% - use lyapunov functions - continuous, not hybrid. need a formalism for hybrid systems
% - higher order PI and PID controllers
% - composing controllers





% \appendix
% \section{Appendix Title}

% This is the text of the appendix, if you need one.

% \acks

% Acknowledgments, if needed.

% We recommend abbrvnat bibliography style.

\bibliographystyle{abbrvnat}

% The bibliography should be embedded for final submission.

\begin{thebibliography}{}
\softraggedright
% ROScoq: http://www.cs.cornell.edu/~aa755/ROSCoq/
% Stability defns: Murray et al, "A mathematical introduction to robotic manipulation, ch4"
% http://www.cds.caltech.edu/~murray/courses/cds101/fa02/caltech/mls93-lyap.pdf
\bibitem[Smith et~al.(2009)Smith, Jones]{smith02}
P. Q. Smith, and X. Y. Jones. ...reference text...

\end{thebibliography}


\end{document}

%                       Revision History
%                       -------- -------
%  Date         Person  Ver.    Change
%  ----         ------  ----    ------

%  2013.06.29   TU      0.1--4  comments on permission/copyright notices
